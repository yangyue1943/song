package com.studio.api.controller;import com.song.net.http.HttpFile;import com.song.toolkit.http.HttpFileRequest;import com.studio.common.result.UploaderFile;import com.studio.common.result.UploaderResult;import org.apache.commons.fileupload.FileUploadException;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.ResponseBody;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.util.Map;/** * description: * author:          song * createDate:      2018/1/24 */@Controller@RequestMapping("/uploader")public class UploaderController {    @ResponseBody    @RequestMapping(value = "upload",method = RequestMethod.POST)    public UploaderResult upload(HttpServletRequest request, HttpServletResponse response) {        UploaderResult result = new UploaderResult();        try {            String savePath="D:\\\\";            HttpFileRequest fileRequest = new HttpFileRequest(request);            Map<String, HttpFile> fileMap= fileRequest.batchSave(savePath);            for (Map.Entry<String, HttpFile> entry : fileMap.entrySet()) {                HttpFile httpFile=entry.getValue();                UploaderFile uploaderFile = new UploaderFile();                uploaderFile.setFileName(entry.getKey());                uploaderFile.setFilePath(httpFile.getFilePath());                uploaderFile.setFileSize(httpFile.getSize());                uploaderFile.setFileType(httpFile.getExtension());                uploaderFile.setRealFileName(httpFile.getFileName());                result.addFile(uploaderFile);            }        } catch (IOException e) {            result.setSuccess(false);            result.setMsg(e.getMessage());        } catch (FileUploadException e) {            result.setSuccess(false);            result.setMsg(e.getMessage());        }        return result;    }}