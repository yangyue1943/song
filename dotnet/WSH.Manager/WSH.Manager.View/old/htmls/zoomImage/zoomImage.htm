<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>最新javascript自动按比例显示图片，按比例压缩图片显示</title>
<script type="text/javascript">
    window.song = {
        autoZoomImage: function (wrapId) {
            var wrap = document.getElementById(wrapId);
            var imgs = wrap.getElementsByTagName("img");
            for (var i = 0; i < imgs.length; i++) {
                song.ratioZoomImage(0, 0, imgs[i]);
            }
        },
        ratioZoomImage: function (maxWidth, maxHeight, objImg) {
            var w = 0, h = 0, wRatio, hRatio, ratio = 1,
                clientWidth = document.documentElement.clientWidth;
            if (maxWidth == 0) {
                maxWidth = clientWidth -0;
            }
            var img = new Image();
            img.src = objImg.src;
            w = img.width;
            h = img.height;
            wRatio = maxWidth / w;
            hRatio = maxHeight / h;
            if (maxWidth == 0 && maxHeight == 0) {
                Ratio = 1;
            } else if (maxWidth == 0) {
                if (hRatio < 1) Ratio = hRatio;
            } else if (maxHeight == 0) {
                if (wRatio < 1) Ratio = wRatio;
            } else if (wRatio < 1 || hRatio < 1) {
                Ratio = (wRatio <= hRatio ? wRatio : hRatio);
            }
            if (Ratio < 1) {
                w = w * Ratio;
                h = h * Ratio;
            }
            objImg.height = h;
            objImg.width = w;
        }
    }
     
</script>
</head>
<body>
    <div id="content" >
        <img src="6763532_980x1200_0.jpg" />
    </div>
</body>
</html>
<script type="text/javascript">
    window.onload = function () {
        song.autoZoomImage("content");
    }
</script>
